# django_celery
Cоздали приложение с помощью Django и  интегрировали Celery.

Инструкция актуальна для Linux-систем.
Используемые технологии:
    python~=3.9
    Django~=4.1
    PostgreSQL
========================================================================================================================
Скопируйте репозиторий с помощью команды:
$ git clone https://github.com/RuslanSayfullin/django_celery.git
Перейдите в основную директорию с помощью команды: 
$ cd django_celery

========================================================================================================================
Создать и активировать виртуальное окружение:
$ python -m venv venv
$ source venv/bin/activate
(venv) $

========================================================================================================================
Установить зависимости из файла requirements.txt:
$ pip install -r requirements.txt

========================================================================================================================
Создание БД

$ sudo su - postgres
Теперь запускаем командную оболочку PostgreSQL:
$ psql 

=# CREATE DATABASE django_celery;
=# CREATE USER portaluser WITH PASSWORD 'myPassword';
=# GRANT ALL PRIVILEGES ON DATABASE portal TO portaluser;
=# \q
$ exit

========================================================================================================================
установите Redis в своей системе:
(venv) $ sudo apt update
(venv) $ sudo apt install redis

После завершения установки вы можете запустить сервер Redis, чтобы убедиться, что все работает.
Откройте новое окно терминала, чтобы запустить сервер:
$ redis-server

Чтобы проверить, работает ли связь с сервером Redis, запустите интерфейс командной строки Redis в новом окне терминала:
$ redis-cli

Как только приглашение изменилось, вы можете ввести ping и нажать Enter, а затем дождаться ответа от Redis:
127.0.0.1:6379> ping
PONG
127.0.0.1:6379>

Далее вам понадобится клиент Python для взаимодействия с Redis.
(venv) $ python3 -m pip install redis
Эта команда не устанавливает Redis в системе, а только предоставляет интерфейс Python для подключения к Redis.


========================================================================================================================
Для запуска выполнить следующие команды:

Команда для создания миграций приложения для базы данных
$ python3 manage.py makemigrations
$ python3 manage.py migrate

Создание суперпользователя
$ python3 manage.py createsuperuser

Будут выведены следующие выходные данные. Введите требуемое имя пользователя, электронную почту и пароль:
по умолчанию почта admin@admin.com пароль: 12345

Username (leave blank to use 'admin'): admin
Email address: admin@admin.com
Password: ********
Password (again): ********
Superuser created successfully.

Команда для запуска приложения
python manage.py runserver

Приложение будет доступно по адресу: http://127.0.0.1:8000/


Запуск приложения
========================================================================================================================
Откройте три отдельных окна терминала и запустите все программы.

Отправьте свое веб-приложение на сервер разработки Django в первом окне:
(venv) $ python3 manage.py runserver

Затем запустите сервер Redis во втором окне терминала, если вы остановили его ранее:
$ redis-server

Наконец, теперь вы можете правильно запускать Celery, не сталкиваясь с сообщением об ошибке:
(venv) $ python3 -m celery -A django_celery worker

*Примечание
Вы можете увидеть предупреждение, связанное с DEBUG настройкой Django. Вы можете проигнорировать это предупреждение для 
этого примера, но вы всегда должны устанавливать DEBUFalse перед развертыванием сайта в рабочей среде.

=======================================================================================================================



